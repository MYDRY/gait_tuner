<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>最短経路の検索</title>
    <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
     
     var rendererOptions = {
         draggable: true,
         preserveViewport:false
     };
     var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
     var directionsService = new google.maps.DirectionsService();
     var map;
     
     function getRoute() {
         var option = {
             zoom:16,
             mapTypeId: google.maps.MapTypeId.ROADMAP
         };
         map = new google.maps.Map(document.getElementById("map_canvas"), option);
         directionsDisplay.setMap(map);
         
         google.maps.event.addListener(directionsDisplay,
                                       'directions_changed', function(){
                                       console.log("HELLo");});
         
         var request = {
             origin: "福岡",
             destination: "博多",
             travelMode: google.maps.DirectionsTravelMode.WALKING,
             unitSystem: google.maps.DirectionsUnitSystem.METRIC,
             optimizeWaypoints: true,
             avoidHighways: false,
             avoidTolls: false
         };
         
         directionsService.route(request, function(response,status){
             if (status == google.maps.DirectionsStatus.OK){
                 console.log("hello");
                 directionsDisplay.setDirections(response);
             } else {
                 console.log("else");
             }
         });
     }
    </script>
  </head>
  <body onload="getRoute()">
    <p>最短経路の検索</p>
    <div id="map_canvas" style="width:500px; height:300px"></div>
    <div id="response"></div>
  </body>
</html>
